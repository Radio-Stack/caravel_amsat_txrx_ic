v { version=2.9.8 file_version=1.2}
G {}
K {}
V {}
S {}
E {}
N 1660 -170 1660 -90 {lab=#net1}
N 1420 -270 1420 -200 {lab=#net2}
N 1420 -140 1420 -90 {lab=#net3}
N 1360 -60 1380 -60 {lab=GND}
N 1360 -60 1360 0 {lab=GND}
N 1360 0 1420 0 {lab=GND}
N 1420 -30 1420 0 {lab=GND}
N 1660 -30 1660 0 {lab=GND}
N 1660 0 1720 0 {lab=GND}
N 1720 -60 1720 0 {lab=GND}
N 1700 -60 1720 -60 {lab=GND}
N 790 -890 1420 -890 {lab=#net4}
N 1420 -890 1420 -860 {lab=#net4}
N 1420 -890 1660 -890 {lab=#net4}
N 1660 -890 1660 -860 {lab=#net4}
N 1600 0 1660 0 {lab=GND}
N 760 0 1360 0 {lab=GND}
N 2610 0 2950 0 {lab=GND}
N 2410 -30 2410 0 {lab=GND}
N 1660 -230 1660 -170 {lab=#net1}
N 1720 0 2410 0 {lab=GND}
N 630 -250 680 -250 {lab=ptat}
N 760 -190 760 0 {lab=GND}
N 2950 -130 2950 0 {lab=GND}
N 2410 -210 2410 -90 {lab=fb}
N 1660 -890 2410 -890 {lab=#net4}
N 760 -710 760 -310 {lab=#net4}
N 2950 -490 2950 -250 {lab=#net4}
N 2920 -890 2950 -890 {lab=#net4}
N 2410 -890 2410 -860 {lab=#net4}
N 3430 -890 3430 -860 {lab=#net4}
N 3220 -890 3430 -890 {lab=#net4}
N 3220 -890 3220 -860 {lab=#net4}
N 3430 -120 3430 -90 {lab=#net5}
N 3220 -650 3220 -570 {lab=#net5}
N 3220 -570 3430 -570 {lab=#net5}
N 3500 -60 3680 -60 {lab=#net5}
N 3430 -120 3500 -120 {lab=#net5}
N 3500 -120 3500 -60 {lab=#net5}
N 3430 0 3720 0 {lab=GND}
N 3720 -30 3720 0 {lab=GND}
N 3430 -30 3430 0 {lab=GND}
N 3410 -60 3430 -60 {lab=GND}
N 3410 -60 3410 0 {lab=GND}
N 3720 -60 3740 -60 {lab=GND}
N 3740 -60 3740 0 {lab=GND}
N 3720 0 3740 0 {lab=GND}
N 3720 -890 3720 -740 {lab=#net4}
N 3640 -710 3680 -710 {lab=cas}
N 3640 -710 3640 -650 {lab=cas}
N 3640 -650 3720 -650 {lab=cas}
N 3720 -680 3720 -650 {lab=cas}
N 3430 -890 3720 -890 {lab=#net4}
N 3720 -650 3720 -90 {lab=cas}
N 3720 -710 3740 -710 {lab=#net4}
N 3740 -890 3740 -710 {lab=#net4}
N 3720 -890 3740 -890 {lab=#net4}
N 2950 -890 3220 -890 {lab=#net4}
N 3430 -640 3430 -570 {lab=#net5}
N 3430 -570 3430 -120 {lab=#net5}
N 3470 -60 3500 -60 {lab=#net5}
N 3410 0 3430 0 {lab=GND}
N 2950 0 3410 0 {lab=GND}
N 2500 -790 2570 -790 {lab=ctat}
N 3140 -400 3140 -190 {lab=ctat}
N 630 -380 630 -250 {lab=ptat}
N 1280 -790 1280 -380 {lab=ptat}
N 1280 -790 1330 -790 {lab=ptat}
N 2780 -170 2850 -170 {lab=#net1}
N 520 -890 760 -890 {lab=#net4}
N 520 0 760 0 {lab=GND}
N 1420 -60 1480 -60 { lab=GND}
N 1480 -60 1480 0 { lab=GND}
N 1600 -60 1660 -60 { lab=GND}
N 1600 -60 1600 0 { lab=GND}
N 1440 -170 1480 -170 { lab=GND}
N 1480 -170 1480 -60 { lab=GND}
N 2430 -60 2470 -60 { lab=GND}
N 2470 -60 2470 0 { lab=GND}
N 1420 0 1480 0 {lab=GND}
N 1480 0 1600 0 {lab=GND}
N 2410 0 2470 0 {lab=GND}
N 2920 -460 2920 -250 { lab=#net6}
N 1420 -640 1420 -410 { lab=#net7}
N 1420 -350 1420 -270 { lab=#net2}
N 1660 -350 1660 -230 { lab=#net1}
N 1660 -640 1660 -410 { lab=#net8}
N 2410 -350 2410 -210 { lab=fb}
N 790 -680 790 -370 { lab=#net9}
N 2570 -790 2570 -400 {lab=ctat}
N 380 -890 520 -890 { lab=#net4}
N 520 -890 520 -730 { lab=#net4}
N 520 -630 520 0 { lab=GND}
N 320 0 520 0 { lab=GND}
N 380 -680 430 -680 { lab=#net4}
N 380 -890 380 -680 { lab=#net4}
N 760 -710 790 -710 { lab=#net4}
N 790 -890 790 -740 { lab=#net4}
N 2920 -490 2950 -490 { lab=#net4}
N 2920 -890 2920 -520 { lab=#net4}
N 2410 -890 2920 -890 { lab=#net4}
N 760 -890 760 -710 {lab=#net4}
N 2950 -890 2950 -490 {lab=#net4}
N 760 -890 790 -890 {lab=#net4}
N 320 -890 380 -890 { lab=#net4}
N 320 -370 320 0 { lab=GND}
N 320 -890 320 -430 { lab=#net4}
N 860 -230 1660 -230 { lab=#net1}
N 900 -380 1280 -380 { lab=ptat}
N 900 -270 1420 -270 { lab=#net2}
N 2610 -20 2610 0 { lab=GND}
N 900 -380 900 -360 { lab=ptat}
N 900 -300 900 -270 { lab=#net2}
N 2570 -400 2780 -400 { lab=ctat}
N 2540 0 2610 0 {lab=GND}
N 630 -380 900 -380 { lab=ptat}
N 860 -270 900 -270 { lab=#net2}
N 2610 -210 2610 -140 { lab=#net10}
N 2570 -210 2610 -210 { lab=#net10}
N 2610 -210 2850 -210 { lab=#net10}
N 2410 -210 2510 -210 { lab=fb}
N 2780 -400 3140 -400 { lab=ctat}
N 2470 0 2540 0 {lab=GND}
N 2410 -640 2410 -410 { lab=#net11}
N 1660 -170 2780 -170 {lab=#net1}
N 3030 -190 3140 -190 { lab=ctat}
N 2570 -810 2570 -790 { lab=ctat}
N 2570 -880 2570 -870 { lab=#net4}
N 2570 -890 2570 -880 { lab=#net4}
N 2570 -870 2570 -850 { lab=#net4}
N 2600 -850 2610 -850 { lab=#net4}
N 2610 -890 2610 -850 { lab=#net4}
N 2530 -850 2540 -850 { lab=#net4}
N 2530 -890 2530 -850 { lab=#net4}
N 2150 -890 2150 -860 {lab=#net4}
N 2150 -640 2150 -220 { lab=#net12}
N 2190 -280 2190 -220 { lab=#net13}
N 2190 -80 2190 0 { lab=GND}
N 2010 -140 2090 -140 { lab=ctl_ctat[4:0]}
N 3280 -1140 3280 -1120 { lab=ctl_ctat[0]}
N 3280 -1140 3320 -1140 { lab=ctl_ctat[0]}
N 3180 -1140 3180 -1120 { lab=ctl_ctat[1]}
N 3180 -1140 3220 -1140 { lab=ctl_ctat[1]}
N 3080 -1140 3080 -1120 { lab=ctl_ctat[2]}
N 3080 -1140 3120 -1140 { lab=ctl_ctat[2]}
N 2980 -1140 2980 -1120 { lab=ctl_ctat[3]}
N 2980 -1140 3020 -1140 { lab=ctl_ctat[3]}
N 2880 -1140 2880 -1120 { lab=ctl_ctat[4]}
N 2880 -1140 2920 -1140 { lab=ctl_ctat[4]}
N 2880 -1060 2880 -1040 { lab=GND}
N 2880 -1040 3280 -1040 { lab=GND}
N 3280 -1060 3280 -1040 { lab=GND}
N 3180 -1060 3180 -1040 { lab=GND}
N 3080 -1060 3080 -1040 { lab=GND}
N 2980 -1060 2980 -1040 { lab=GND}
N 2880 -1040 2880 -1020 { lab=GND}
N 2330 -280 2410 -280 { lab=fb}
N 2190 -280 2270 -280 { lab=#net13}
C {bandgap_opamp/bandgap_opamp.sym} 760 -250 0 1 {name=x1}
C {lab_wire.sym} 1330 -790 0 0 {name=l1 sig_type=std_logic lab=ptat}
C {lab_wire.sym} 1570 -790 0 0 {name=l2 sig_type=std_logic lab=ptat}
C {lab_wire.sym} 2500 -790 0 1 {name=l3 sig_type=std_logic lab=ctat}
C {lab_wire.sym} 1330 -710 0 0 {name=l4 sig_type=std_logic lab=cas}
C {lab_wire.sym} 1570 -710 0 0 {name=l5 sig_type=std_logic lab=cas}
C {lab_wire.sym} 2500 -710 0 1 {name=l6 sig_type=std_logic lab=cas}
C {lab_wire.sym} 3130 -710 0 0 {name=l7 sig_type=std_logic lab=cas}
C {lab_wire.sym} 3340 -710 0 0 {name=l8 sig_type=std_logic lab=cas}
C {lab_wire.sym} 3130 -790 0 0 {name=l9 sig_type=std_logic lab=ptat}
C {lab_wire.sym} 3340 -790 0 0 {name=l10 sig_type=std_logic lab=ctat}
C {lab_wire.sym} 3640 -710 0 1 {name=l11 sig_type=std_logic lab=cas}
C {sky130_fd_pr/pfet_01v8_lvt.sym} 3700 -710 0 0 {name=M8
L=8
W=5
ad="'W * 0.29'" pd="'2 * (W + 0.29)'"
as="'W * 0.29'" ps="'2 * (W + 0.29)'"
nrd="'0.29 / W'" nrs="'0.29 / W'"
sa=0 sb=0 sd=0
nf=1 mult=1
model=pfet_01v8_lvt
spiceprefix=X
}
C {sky130_fd_pr/nfet_01v8_lvt.sym} 3450 -60 0 1 {name=M3
L=8
W=5
ad="[expr @W *0.29]" pd="[expr 2*(@W + 0.29)]"
as="[expr @W *0.29]" ps="[expr 2*(@W + 0.29)]"
nrd="[expr 0.29/@W ]" nrs="[expr 0.29/@W ]"
sa=0 sb=0 sd=0
nf=1 mult=2
model=nfet_01v8_lvt
spiceprefix=X
}
C {sky130_fd_pr/nfet_01v8_lvt.sym} 3700 -60 0 0 {name=M1
L=8
W=5
ad="[expr @W *0.29]" pd="[expr 2*(@W + 0.29)]"
as="[expr @W *0.29]" ps="[expr 2*(@W + 0.29)]"
nrd="[expr 0.29/@W ]" nrs="[expr 0.29/@W ]"
sa=0 sb=0 sd=0
nf=1 mult=2
model=nfet_01v8_lvt
spiceprefix=X
}
C {spice_probe.sym} 1420 -270 0 0 {name=p6 analysis=tran voltage=0.7342}
C {spice_probe.sym} 1660 -230 0 0 {name=p7 analysis=tran voltage=0.7341}
C {spice_probe.sym} 2410 -210 0 0 {name=p8 analysis=tran voltage=0.7338}
C {spice_probe.sym} 2500 -710 0 0 {name=p12 analysis=tran voltage=0.4132}
C {ammeter.sym} 790 -340 0 0 {name=v2 current=7.5997e-06}
C {bandgap_cascurr_cell/bandgap_cascurr_cell.sym} 1420 -750 0 0 {name=x5 m=8}
C {bandgap_cascurr_cell/bandgap_cascurr_cell.sym} 1660 -750 0 0 {name=x6 m=8}
C {bandgap_cascurr_cell/bandgap_cascurr_cell.sym} 2410 -750 0 1 {name=x7 m=8}
C {bandgap_cascurr_cell/bandgap_cascurr_cell.sym} 3220 -750 0 0 {name=x10 m=4}
C {bandgap_cascurr_cell/bandgap_cascurr_cell.sym} 3430 -750 0 0 {name=x11 m=4}
C {sky130_fd_pr/pnp_05v5.sym} 1400 -60 0 0 {name=Q1
m=8
model=pnp_05v5_W3p40L3p40
spiceprefix=X
}
C {sky130_fd_pr/pnp_05v5.sym} 1680 -60 0 1 {name=Q2
m=1
model=pnp_05v5_W3p40L3p40
spiceprefix=X
}
C {ammeter.sym} 1420 -380 0 0 {name=v3 current=7.9249e-06}
C {ammeter.sym} 1660 -380 0 0 {name=v5 current=7.9249e-06}
C {ammeter.sym} 2410 -380 0 0 {name=v6 current=2.3435e-05}
C {capa.sym} 900 -330 0 0 {name=C1
m=1
value=1m
footprint=1206
device="ceramic capacitor"}
C {sky130_fd_pr/res_xhigh_po.sym} 1420 -170 0 1 {name=R1
W=1
L=3.25
model=res_xhigh_po
spiceprefix=X
m=1}
C {spice_probe.sym} 790 -550 0 1 {name=p11 analysis=tran voltage=0.8189}
C {spice_probe.sym} 2570 -400 0 0 {name=p9 analysis=tran voltage=0.884}
C {bandgap_bmr/bandgap_bmr.sym} 520 -680 0 0 {name=x8}
C {sky130_fd_pr/pfet_01v8_lvt.sym} 810 -710 0 1 {name=Mcurr
L=8
W=5
ad="'W * 0.29'" pd="'2 * (W + 0.29)'"
as="'W * 0.29'" ps="'2 * (W + 0.29)'"
nrd="'0.29 / W'" nrs="'0.29 / W'"
sa=0 sb=0 sd=0
nf=1 mult=1
model=pfet_01v8_lvt
spiceprefix=X
}
C {lab_wire.sym} 610 -680 0 1 {name=l12 sig_type=std_logic lab=bmr_biasv}
C {lab_wire.sym} 830 -710 0 1 {name=l13 sig_type=std_logic lab=bmr_biasv}
C {sky130_fd_pr/pfet_01v8_lvt.sym} 2900 -490 0 0 {name=Mcurr1
L=8
W=5
ad="'W * 0.29'" pd="'2 * (W + 0.29)'"
as="'W * 0.29'" ps="'2 * (W + 0.29)'"
nrd="'0.29 / W'" nrs="'0.29 / W'"
sa=0 sb=0 sd=0
nf=1 mult=1
model=pfet_01v8_lvt
spiceprefix=X
}
C {lab_wire.sym} 2880 -490 0 0 {name=l14 sig_type=std_logic lab=bmr_biasv}
C {vsource.sym} 320 -400 0 0 {name=Vdd value=\{vdd\}}
C {gnd.sym} 320 0 0 0 {name=l15 lab=GND}
C {code.sym} 3630 -1120 0 0 {name=simulation only_toplevel=false value="
.temp 27

.lib "sky130_fd_pr/models/sky130.lib.spice" tt
.include sky130_fd_pr/models/sky130_fd_pr__model__pnp.model.spice

.param vdd=1.8

.save all

.op
.ac dec 10 1 1G

.control
   run
   setplot ac1
   set units=degrees
   gnuplot bandgap_core_stability2 db(fb) ph(fb)
.endc
"}
C {res_ac.sym} 2540 -210 1 0 {name=R3
value=1u
device=resistor
m=1
ac=1G}
C {res_ac.sym} 2610 -110 2 0 {name=R4
value=1G
device=resistor
m=1
ac=1u}
C {vsource.sym} 2610 -50 0 0 {name=Vin value="dc=0 ac=1"}
C {lab_wire.sym} 2450 -210 0 1 {name=l16 sig_type=std_logic lab=fb}
C {sky130_fd_pr/res_xhigh_po.sym} 2410 -60 0 1 {name=R6
W=1
L=28.6
model=res_xhigh_po
spiceprefix=X
m=1}
C {bandgap_opamp/bandgap_opamp.sym} 2950 -190 0 0 {name=x2}
C {sky130_fd_pr/pfet_01v8_lvt.sym} 2570 -830 3 0 {name=Mcurr2
L=8
W=7
ad="'W * 0.29'" pd="'2 * (W + 0.29)'"
as="'W * 0.29'" ps="'2 * (W + 0.29)'"
nrd="'0.29 / W'" nrs="'0.29 / W'"
sa=0 sb=0 sd=0
nf=1 mult=32
model=pfet_01v8_lvt
spiceprefix=X
}
C {bandgap_trim/bandgap_trim.sym} 2110 -100 0 0 {name=x13}
C {lab_wire.sym} 2060 -790 0 0 {name=l21 sig_type=std_logic lab=ctat}
C {lab_wire.sym} 2060 -710 0 0 {name=l22 sig_type=std_logic lab=cas}
C {bandgap_cascurr_cell/bandgap_cascurr_cell.sym} 2150 -750 0 0 {name=x14 m=2}
C {lab_wire.sym} 2010 -140 0 1 {name=l23 sig_type=std_logic lab=ctl_ctat[4:0]}
C {vsource.sym} 2880 -1090 0 0 {name=Vctl4 value=1.8}
C {vsource.sym} 2980 -1090 0 0 {name=Vctl3 value=1.8}
C {vsource.sym} 3080 -1090 0 0 {name=Vctl2 value=1.8}
C {vsource.sym} 3180 -1090 0 0 {name=Vctl1 value=1.8}
C {vsource.sym} 3280 -1090 0 0 {name=Vctl0 value=1.8}
C {gnd.sym} 2880 -1020 0 0 {name=l24 lab=GND}
C {lab_wire.sym} 3280 -1140 0 1 {name=l25 sig_type=std_logic lab=ctl_ctat[0]}
C {lab_wire.sym} 3180 -1140 0 1 {name=l26 sig_type=std_logic lab=ctl_ctat[1]}
C {lab_wire.sym} 3080 -1140 0 1 {name=l27 sig_type=std_logic lab=ctl_ctat[2]}
C {lab_wire.sym} 2980 -1140 0 1 {name=l28 sig_type=std_logic lab=ctl_ctat[3]}
C {lab_wire.sym} 2880 -1140 0 1 {name=l29 sig_type=std_logic lab=ctl_ctat[4]}
C {ammeter.sym} 2300 -280 1 0 {name=v1 current=1.1331e-05}
