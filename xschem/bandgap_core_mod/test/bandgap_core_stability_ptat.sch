v { version=2.9.8 file_version=1.2}
G {}
K {}
V {}
S {}
E {}
N 1660 -170 1660 -90 {lab=#net1}
N 1420 -270 1420 -200 {lab=#net2}
N 1420 -140 1420 -90 {lab=#net3}
N 1360 -60 1380 -60 {lab=GND}
N 1360 -60 1360 0 {lab=GND}
N 1360 0 1420 0 {lab=GND}
N 1420 -30 1420 0 {lab=GND}
N 1660 -30 1660 0 {lab=GND}
N 1660 0 1720 0 {lab=GND}
N 1720 -60 1720 0 {lab=GND}
N 1700 -60 1720 -60 {lab=GND}
N 1320 -890 1420 -890 {lab=#net4}
N 1420 -890 1420 -860 {lab=#net4}
N 1420 -890 1660 -890 {lab=#net4}
N 1660 -890 1660 -860 {lab=#net4}
N 1600 0 1660 0 {lab=GND}
N 1130 0 1360 0 {lab=GND}
N 2010 0 2490 0 {lab=GND}
N 1950 -30 1950 0 {lab=GND}
N 1660 -230 1660 -170 {lab=#net1}
N 1720 0 1950 0 {lab=GND}
N 580 -250 630 -250 {lab=ptat}
N 710 -190 710 0 {lab=GND}
N 2490 -130 2490 0 {lab=GND}
N 1950 -210 1950 -90 {lab=#net5}
N 1950 -210 2390 -210 {lab=#net5}
N 1660 -890 1950 -890 {lab=#net4}
N 710 -710 710 -310 {lab=#net4}
N 2490 -490 2490 -250 {lab=#net4}
N 2460 -890 2490 -890 {lab=#net4}
N 1950 -890 1950 -860 {lab=#net4}
N 2970 -890 2970 -860 {lab=#net4}
N 2760 -890 2970 -890 {lab=#net4}
N 2760 -890 2760 -860 {lab=#net4}
N 2970 -120 2970 -90 {lab=#net6}
N 2760 -650 2760 -570 {lab=#net6}
N 2760 -570 2970 -570 {lab=#net6}
N 3040 -60 3220 -60 {lab=#net6}
N 2970 -120 3040 -120 {lab=#net6}
N 3040 -120 3040 -60 {lab=#net6}
N 2970 0 3260 0 {lab=GND}
N 3260 -30 3260 0 {lab=GND}
N 2970 -30 2970 0 {lab=GND}
N 2950 -60 2970 -60 {lab=GND}
N 2950 -60 2950 0 {lab=GND}
N 3260 -60 3280 -60 {lab=GND}
N 3280 -60 3280 0 {lab=GND}
N 3260 0 3280 0 {lab=GND}
N 3260 -640 3260 -90 {lab=cas}
N 2490 -890 2760 -890 {lab=#net4}
N 2970 -640 2970 -570 {lab=#net6}
N 2970 -570 2970 -120 {lab=#net6}
N 3010 -60 3040 -60 {lab=#net6}
N 2950 0 2970 0 {lab=GND}
N 2490 0 2950 0 {lab=GND}
N 2040 -790 2110 -790 {lab=ctat}
N 2610 -310 2610 -190 {lab=ctat}
N 2570 -190 2610 -190 {lab=ctat}
N 2110 -310 2110 -290 {lab=ctat}
N 580 -380 580 -250 {lab=ptat}
N 1280 -790 1280 -380 {lab=ptat}
N 1280 -790 1330 -790 {lab=ptat}
N 2110 -170 2390 -170 {lab=#net1}
N 470 -890 710 -890 {lab=#net4}
N 470 0 710 0 {lab=GND}
N 1420 -60 1480 -60 { lab=GND}
N 1480 -60 1480 0 { lab=GND}
N 1600 -60 1660 -60 { lab=GND}
N 1600 -60 1600 0 { lab=GND}
N 1440 -170 1480 -170 { lab=GND}
N 1480 -170 1480 -60 { lab=GND}
N 1970 -60 2010 -60 { lab=GND}
N 2010 -60 2010 0 { lab=GND}
N 1420 0 1480 0 {lab=GND}
N 1480 0 1600 0 {lab=GND}
N 1950 0 2010 0 {lab=GND}
N 2460 -460 2460 -250 { lab=#net7}
N 1420 -640 1420 -410 { lab=#net8}
N 1420 -350 1420 -270 { lab=#net2}
N 1660 -350 1660 -230 { lab=#net1}
N 1660 -640 1660 -410 { lab=#net9}
N 1950 -350 1950 -210 { lab=#net5}
N 1950 -640 1950 -410 { lab=#net10}
N 1660 -170 2110 -170 {lab=#net1}
N 740 -680 740 -370 { lab=#net11}
N 2110 -230 2110 -170 { lab=#net1}
N 2110 -310 2610 -310 { lab=ctat}
N 2110 -790 2110 -310 {lab=ctat}
N 330 -890 470 -890 { lab=#net4}
N 470 -890 470 -730 { lab=#net4}
N 470 -630 470 0 { lab=GND}
N 270 0 470 0 { lab=GND}
N 330 -680 380 -680 { lab=#net4}
N 330 -890 330 -680 { lab=#net4}
N 710 -710 740 -710 { lab=#net4}
N 740 -890 740 -740 { lab=#net4}
N 2460 -490 2490 -490 { lab=#net4}
N 2460 -890 2460 -520 { lab=#net4}
N 1950 -890 2460 -890 { lab=#net4}
N 710 -890 710 -710 {lab=#net4}
N 2490 -890 2490 -490 {lab=#net4}
N 710 -890 740 -890 {lab=#net4}
N 270 -890 330 -890 { lab=#net4}
N 270 -370 270 0 { lab=GND}
N 270 -890 270 -430 { lab=#net4}
N 1130 -140 1130 -100 { lab=#net12}
N 970 0 1130 0 {lab=GND}
N 580 -380 1280 -380 { lab=ptat}
N 1130 -40 1130 0 { lab=GND}
N 1310 -860 1320 -860 { lab=#net4}
N 1320 -890 1320 -860 { lab=#net4}
N 1280 -890 1280 -860 { lab=#net4}
N 1240 -860 1250 -860 { lab=#net4}
N 1240 -890 1240 -860 { lab=#net4}
N 1280 -890 1320 -890 {lab=#net4}
N 1240 -890 1280 -890 {lab=#net4}
N 740 -890 1240 -890 {lab=#net4}
N 1280 -820 1280 -790 { lab=ptat}
N 1380 -230 1660 -230 { lab=#net1}
N 1390 -270 1420 -270 { lab=#net2}
N 1130 -270 1190 -270 { lab=#net13}
N 970 -230 1190 -230 { lab=#net14}
N 1130 -270 1130 -200 { lab=#net13}
N 970 -140 970 -100 { lab=#net15}
N 970 -40 970 0 { lab=GND}
N 970 -230 970 -200 { lab=#net14}
N 1370 -320 1380 -320 { lab=#net1}
N 1380 -320 1380 -230 { lab=#net1}
N 1370 -360 1390 -360 { lab=#net2}
N 1390 -360 1390 -270 { lab=#net2}
N 2820 -1130 2820 -1110 { lab=ctl_ptat[0]}
N 2820 -1130 2860 -1130 { lab=ctl_ptat[0]}
N 2720 -1130 2720 -1110 { lab=ctl_ptat[1]}
N 2720 -1130 2760 -1130 { lab=ctl_ptat[1]}
N 2620 -1130 2620 -1110 { lab=ctl_ptat[2]}
N 2620 -1130 2660 -1130 { lab=ctl_ptat[2]}
N 2520 -1130 2520 -1110 { lab=ctl_ptat[3]}
N 2520 -1130 2560 -1130 { lab=ctl_ptat[3]}
N 2420 -1130 2420 -1110 { lab=ctl_ptat[4]}
N 2420 -1130 2460 -1130 { lab=ctl_ptat[4]}
N 2420 -1050 2420 -1030 { lab=GND}
N 2720 -1030 2820 -1030 { lab=GND}
N 2820 -1050 2820 -1030 { lab=GND}
N 2720 -1050 2720 -1030 { lab=GND}
N 2620 -1050 2620 -1030 { lab=GND}
N 2520 -1050 2520 -1030 { lab=GND}
N 2420 -1030 2420 -1010 { lab=GND}
N 3260 -890 3260 -830 {lab=#net4}
N 3300 -800 3340 -800 {lab=cas}
N 3340 -800 3340 -700 {lab=cas}
N 3260 -770 3260 -730 {lab=#net16}
N 3240 -800 3260 -800 {lab=#net4}
N 3240 -890 3240 -800 {lab=#net4}
N 3240 -890 3260 -890 {lab=#net4}
N 3240 -800 3240 -700 { lab=#net4}
N 3240 -700 3260 -700 { lab=#net4}
N 3300 -700 3340 -700 { lab=cas}
N 3340 -700 3340 -640 { lab=cas}
N 3260 -640 3340 -640 { lab=cas}
N 3260 -670 3260 -640 { lab=cas}
N 2970 -890 3240 -890 {lab=#net4}
N 710 0 970 0 {lab=GND}
N 1250 -230 1380 -230 { lab=#net1}
N 1250 -270 1390 -270 { lab=#net2}
N 810 -270 1130 -270 { lab=#net13}
N 810 -230 970 -230 { lab=#net14}
N 2620 -1030 2720 -1030 { lab=GND}
N 2520 -1030 2620 -1030 { lab=GND}
N 2420 -1030 2520 -1030 { lab=GND}
N 1520 -210 1520 -160 {}
N 1420 -210 1520 -210 {}
N 1520 -100 1520 0 {}
C {bandgap_opamp/bandgap_opamp.sym} 710 -250 0 1 {name=x1}
C {bandgap_opamp/bandgap_opamp.sym} 2490 -190 0 0 {name=x2}
C {lab_wire.sym} 1330 -790 0 0 {name=l1 sig_type=std_logic lab=ptat}
C {lab_wire.sym} 1570 -790 0 0 {name=l2 sig_type=std_logic lab=ptat}
C {lab_wire.sym} 2040 -790 0 1 {name=l3 sig_type=std_logic lab=ctat}
C {lab_wire.sym} 1330 -710 0 0 {name=l4 sig_type=std_logic lab=cas}
C {lab_wire.sym} 1570 -710 0 0 {name=l5 sig_type=std_logic lab=cas}
C {lab_wire.sym} 2040 -710 0 1 {name=l6 sig_type=std_logic lab=cas}
C {lab_wire.sym} 2670 -710 0 0 {name=l7 sig_type=std_logic lab=cas}
C {lab_wire.sym} 2880 -710 0 0 {name=l8 sig_type=std_logic lab=cas}
C {lab_wire.sym} 2670 -790 0 0 {name=l9 sig_type=std_logic lab=ptat}
C {lab_wire.sym} 2880 -790 0 0 {name=l10 sig_type=std_logic lab=ctat}
C {sky130_fd_pr/nfet_01v8_lvt.sym} 2990 -60 0 1 {name=M3
L=8
W=7
ad="[expr @W *0.29]" pd="[expr 2*(@W + 0.29)]"
as="[expr @W *0.29]" ps="[expr 2*(@W + 0.29)]"
nrd="[expr 0.29/@W ]" nrs="[expr 0.29/@W ]"
sa=0 sb=0 sd=0
nf=1 mult=2
model=nfet_01v8_lvt
spiceprefix=X
}
C {sky130_fd_pr/nfet_01v8_lvt.sym} 3240 -60 0 0 {name=M1
L=8
W=7
ad="[expr @W *0.29]" pd="[expr 2*(@W + 0.29)]"
as="[expr @W *0.29]" ps="[expr 2*(@W + 0.29)]"
nrd="[expr 0.29/@W ]" nrs="[expr 0.29/@W ]"
sa=0 sb=0 sd=0
nf=1 mult=2
model=nfet_01v8_lvt
spiceprefix=X
}
C {spice_probe.sym} 1420 -270 0 0 {name=p6 analysis=tran voltage=0.7342}
C {spice_probe.sym} 1660 -230 0 0 {name=p7 analysis=tran voltage=0.7341}
C {spice_probe.sym} 1950 -210 0 0 {name=p8 analysis=tran voltage=0.7341}
C {spice_probe.sym} 2040 -710 0 0 {name=p12 analysis=tran voltage=0.5687}
C {ammeter.sym} 740 -340 0 0 {name=v2 current=7.5997e-06}
C {bandgap_cascurr_cell/bandgap_cascurr_cell.sym} 1420 -750 0 0 {name=x5 m=8}
C {bandgap_cascurr_cell/bandgap_cascurr_cell.sym} 1660 -750 0 0 {name=x6 m=8}
C {bandgap_cascurr_cell/bandgap_cascurr_cell.sym} 1950 -750 0 1 {name=x7 m=8}
C {bandgap_cascurr_cell/bandgap_cascurr_cell.sym} 2760 -750 0 0 {name=x10 m=2}
C {bandgap_cascurr_cell/bandgap_cascurr_cell.sym} 2970 -750 0 0 {name=x11 m=2}
C {sky130_fd_pr/pnp_05v5.sym} 1400 -60 0 0 {name=Q1
m=8
model=pnp_05v5_W3p40L3p40
spiceprefix=X
}
C {sky130_fd_pr/pnp_05v5.sym} 1680 -60 0 1 {name=Q2
m=1
model=pnp_05v5_W3p40L3p40
spiceprefix=X
}
C {ammeter.sym} 1420 -380 0 0 {name=v3 current=7.9258e-06}
C {ammeter.sym} 1660 -380 0 0 {name=v5 current=7.9257e-06}
C {ammeter.sym} 1950 -380 0 0 {name=v6 current=1.2106e-05}
C {capa.sym} 2110 -260 0 0 {name=C1
m=1
value=1m
footprint=1206
device="ceramic capacitor"}
C {sky130_fd_pr/res_xhigh_po.sym} 1420 -170 0 1 {name=R1
W=1
L=3.25
model=res_xhigh_po
spiceprefix=X
m=1}
C {sky130_fd_pr/res_xhigh_po.sym} 1950 -60 0 1 {name=R2
W=1
L=28.6
model=res_xhigh_po
spiceprefix=X
m=1}
C {spice_probe.sym} 740 -550 0 1 {name=p11 analysis=tran voltage=0.8189}
C {spice_probe.sym} 2170 -310 0 0 {name=p9 analysis=tran voltage=1.004}
C {bandgap_bmr/bandgap_bmr.sym} 470 -680 0 0 {name=x8}
C {sky130_fd_pr/pfet_01v8_lvt.sym} 760 -710 0 1 {name=Mcurr
L=8
W=5
ad="'W * 0.29'" pd="'2 * (W + 0.29)'"
as="'W * 0.29'" ps="'2 * (W + 0.29)'"
nrd="'0.29 / W'" nrs="'0.29 / W'"
sa=0 sb=0 sd=0
nf=1 mult=4
model=pfet_01v8_lvt
spiceprefix=X
}
C {lab_wire.sym} 560 -680 0 1 {name=l12 sig_type=std_logic lab=bmr_biasv}
C {lab_wire.sym} 780 -710 0 1 {name=l13 sig_type=std_logic lab=bmr_biasv}
C {sky130_fd_pr/pfet_01v8_lvt.sym} 2440 -490 0 0 {name=Mcurr1
L=8
W=5
ad="'W * 0.29'" pd="'2 * (W + 0.29)'"
as="'W * 0.29'" ps="'2 * (W + 0.29)'"
nrd="'0.29 / W'" nrs="'0.29 / W'"
sa=0 sb=0 sd=0
nf=1 mult=4
model=pfet_01v8_lvt
spiceprefix=X
}
C {lab_wire.sym} 2420 -490 0 0 {name=l14 sig_type=std_logic lab=bmr_biasv}
C {vsource.sym} 270 -400 0 0 {name=Vdd value=\{vdd\}}
C {gnd.sym} 270 0 0 0 {name=l15 lab=GND}
C {vsource.sym} 1130 -70 0 0 {name=Vin value="dc=0 ac=1"}
C {lab_wire.sym} 1330 -370 0 1 {name=l16 sig_type=std_logic lab=ac}
C {sky130_fd_pr/pfet_01v8_lvt.sym} 1280 -840 1 1 {name=Mcurr2
L=8
W=7
ad="'W * 0.29'" pd="'2 * (W + 0.29)'"
as="'W * 0.29'" ps="'2 * (W + 0.29)'"
nrd="'0.29 / W'" nrs="'0.29 / W'"
sa=0 sb=0 sd=0
nf=1 mult=64
model=pfet_01v8_lvt
spiceprefix=X
}
C {vsource.sym} 970 -70 0 0 {name=Vin1 value="dc=0 ac=-1"}
C {vcvs.sym} 1330 -340 0 1 {name=E1 value=1}
C {gnd.sym} 1330 -310 0 0 {name=l17 lab=GND}
C {code.sym} 3170 -1110 0 0 {name=simulation only_toplevel=false value="
.temp 27

.lib "sky130_fd_pr/models/sky130.lib.spice" tt
.include sky130_fd_pr/models/sky130_fd_pr__model__pnp.model.spice

.param vdd=1.8

.param ctl4=0
.param ctl3=0
.param ctl2=0
.param ctl1=0
.param ctl0=0

.save all

*.op
.ac dec 10 1 1G

*.control
*   run
*   setplot ac1
*   set units=degrees
*   gnuplot bandgap_core_stability2 db(fb) ph(fb)
*.endc
"}
C {vsource.sym} 2420 -1080 0 0 {name=Vctl4 value=\{ctl4\}}
C {vsource.sym} 2520 -1080 0 0 {name=Vctl3 value=\{ctl3\}}
C {vsource.sym} 2620 -1080 0 0 {name=Vctl2 value=\{ctl2\}}
C {vsource.sym} 2720 -1080 0 0 {name=Vctl1 value=\{ctl1\}}
C {vsource.sym} 2820 -1080 0 0 {name=Vctl0 value=\{ctl0\}}
C {gnd.sym} 2420 -1010 0 0 {name=l24 lab=GND}
C {lab_wire.sym} 2820 -1130 0 1 {name=l25 sig_type=std_logic lab=ctl_ptat[0]}
C {lab_wire.sym} 2720 -1130 0 1 {name=l26 sig_type=std_logic lab=ctl_ptat[1]}
C {lab_wire.sym} 2620 -1130 0 1 {name=l27 sig_type=std_logic lab=ctl_ptat[2]}
C {lab_wire.sym} 2520 -1130 0 1 {name=l28 sig_type=std_logic lab=ctl_ptat[3]}
C {lab_wire.sym} 2420 -1130 0 1 {name=l29 sig_type=std_logic lab=ctl_ptat[4]}
C {res_ac.sym} 1220 -270 1 0 {name=R3
value=1u
device=resistor
m=1
ac=1G}
C {res_ac.sym} 1220 -230 1 0 {name=R5
value=1u
device=resistor
m=1
ac=1G}
C {res_ac.sym} 1130 -170 2 0 {name=R4
value=1G
device=resistor
m=1
ac=1u}
C {res_ac.sym} 970 -170 2 0 {name=R6
value=1G
device=resistor
m=1
ac=1u}
C {lab_wire.sym} 3340 -800 0 0 {name=l11 sig_type=std_logic lab=cas}
C {sky130_fd_pr/pfet_01v8_lvt.sym} 3280 -800 0 1 {name=M8
L=8
W=5
ad="'W * 0.29'" pd="'2 * (W + 0.29)'"
as="'W * 0.29'" ps="'2 * (W + 0.29)'"
nrd="'0.29 / W'" nrs="'0.29 / W'"
sa=0 sb=0 sd=0
nf=1 mult=2
model=pfet_01v8_lvt
spiceprefix=X
}
C {sky130_fd_pr/pfet_01v8_lvt.sym} 3280 -700 0 1 {name=Mcpdiff1
L=0.5
W=5
ad="'W * 0.29'" pd="'2 * (W + 0.29)'"
as="'W * 0.29'" ps="'2 * (W + 0.29)'"
nrd="'0.29 / W'" nrs="'0.29 / W'"
sa=0 sb=0 sd=0
nf=1 mult=4
model=pfet_01v8_lvt
spiceprefix=X
}
C {capa.sym} 1520 -130 0 0 {name=C2
m=1
value=10p
footprint=1206
device="ceramic capacitor"}
