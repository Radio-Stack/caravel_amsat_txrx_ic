v { version=2.9.8 file_version=1.2}
G {}
K {}
V {}
S {}
E {}
N 1660 -170 1660 -90 {lab=#net1}
N 1420 -270 1420 -200 {lab=#net2}
N 1420 -140 1420 -90 {lab=#net3}
N 1360 -60 1380 -60 {lab=GND}
N 1360 -60 1360 0 {lab=GND}
N 1360 0 1420 0 {lab=GND}
N 1420 -30 1420 0 {lab=GND}
N 1660 -30 1660 0 {lab=GND}
N 1660 0 1720 0 {lab=GND}
N 1720 -60 1720 0 {lab=GND}
N 1700 -60 1720 -60 {lab=GND}
N 790 -890 1420 -890 {lab=#net4}
N 1420 -890 1420 -860 {lab=#net4}
N 1420 -890 1660 -890 {lab=#net4}
N 1660 -890 1660 -860 {lab=#net4}
N 1600 0 1660 0 {lab=GND}
N 760 0 1360 0 {lab=GND}
N 2150 0 2490 0 {lab=GND}
N 1950 -30 1950 0 {lab=GND}
N 1660 -230 1660 -170 {lab=#net1}
N 1720 0 1950 0 {lab=GND}
N 630 -250 680 -250 {lab=ptat}
N 760 -190 760 0 {lab=GND}
N 2490 -130 2490 0 {lab=GND}
N 1950 -210 1950 -90 {lab=ac}
N 1660 -890 1950 -890 {lab=#net4}
N 760 -710 760 -310 {lab=#net4}
N 2490 -490 2490 -250 {lab=#net4}
N 2460 -890 2490 -890 {lab=#net4}
N 1950 -890 1950 -860 {lab=#net4}
N 2970 -890 2970 -860 {lab=#net4}
N 2760 -890 2970 -890 {lab=#net4}
N 2760 -890 2760 -860 {lab=#net4}
N 2970 -120 2970 -90 {lab=#net5}
N 2760 -650 2760 -570 {lab=#net5}
N 2760 -570 2970 -570 {lab=#net5}
N 3040 -60 3220 -60 {lab=#net5}
N 2970 -120 3040 -120 {lab=#net5}
N 3040 -120 3040 -60 {lab=#net5}
N 2970 0 3260 0 {lab=GND}
N 3260 -30 3260 0 {lab=GND}
N 2970 -30 2970 0 {lab=GND}
N 2950 -60 2970 -60 {lab=GND}
N 2950 -60 2950 0 {lab=GND}
N 3260 -60 3280 -60 {lab=GND}
N 3280 -60 3280 0 {lab=GND}
N 3260 0 3280 0 {lab=GND}
N 2970 -890 3240 -890 {lab=#net4}
N 2490 -890 2760 -890 {lab=#net4}
N 2970 -640 2970 -570 {lab=#net5}
N 2970 -570 2970 -120 {lab=#net5}
N 3010 -60 3040 -60 {lab=#net5}
N 2950 0 2970 0 {lab=GND}
N 2490 0 2950 0 {lab=GND}
N 2040 -790 2110 -790 {lab=ctat}
N 2680 -400 2680 -190 {lab=ctat}
N 630 -380 630 -250 {lab=ptat}
N 1280 -790 1280 -380 {lab=ptat}
N 1280 -790 1330 -790 {lab=ptat}
N 2320 -170 2390 -170 {lab=#net1}
N 520 -890 760 -890 {lab=#net4}
N 520 0 760 0 {lab=GND}
N 1420 -60 1480 -60 { lab=GND}
N 1480 -60 1480 0 { lab=GND}
N 1600 -60 1660 -60 { lab=GND}
N 1600 -60 1600 0 { lab=GND}
N 1420 0 1480 0 {lab=GND}
N 1480 0 1600 0 {lab=GND}
N 1950 0 2010 0 {lab=GND}
N 2460 -460 2460 -250 { lab=#net6}
N 1420 -640 1420 -410 { lab=#net7}
N 1420 -350 1420 -270 { lab=#net2}
N 1660 -350 1660 -230 { lab=#net1}
N 1660 -640 1660 -410 { lab=#net8}
N 1950 -350 1950 -210 { lab=ac}
N 790 -680 790 -370 { lab=#net9}
N 380 -890 520 -890 { lab=#net4}
N 520 -890 520 -730 { lab=#net4}
N 520 -630 520 0 { lab=GND}
N 320 0 520 0 { lab=GND}
N 380 -680 430 -680 { lab=#net4}
N 380 -890 380 -680 { lab=#net4}
N 760 -710 790 -710 { lab=#net4}
N 790 -890 790 -740 { lab=#net4}
N 2460 -490 2490 -490 { lab=#net4}
N 2460 -890 2460 -520 { lab=#net4}
N 1950 -890 2460 -890 { lab=#net4}
N 760 -890 760 -710 {lab=#net4}
N 2490 -890 2490 -490 {lab=#net4}
N 760 -890 790 -890 {lab=#net4}
N 320 -890 380 -890 { lab=#net4}
N 320 -370 320 0 { lab=GND}
N 320 -890 320 -430 { lab=#net4}
N 860 -230 1660 -230 { lab=#net1}
N 900 -380 1280 -380 { lab=ptat}
N 900 -270 1420 -270 { lab=#net2}
N 2150 -20 2150 0 { lab=GND}
N 900 -380 900 -360 { lab=ptat}
N 900 -300 900 -270 { lab=#net2}
N 2110 -400 2320 -400 { lab=ctat}
N 2080 0 2150 0 {lab=GND}
N 630 -380 900 -380 { lab=ptat}
N 860 -270 900 -270 { lab=#net2}
N 2150 -210 2150 -140 { lab=#net10}
N 2110 -210 2150 -210 { lab=#net10}
N 2150 -210 2390 -210 { lab=#net10}
N 1950 -210 2050 -210 { lab=ac}
N 2320 -400 2680 -400 { lab=ctat}
N 2010 0 2080 0 {lab=GND}
N 1950 -640 1950 -410 { lab=#net11}
N 1660 -170 2320 -170 {lab=#net1}
N 2570 -190 2680 -190 { lab=ctat}
N 2110 -810 2110 -790 { lab=ctat}
N 2110 -880 2110 -870 { lab=#net4}
N 2110 -890 2110 -880 { lab=#net4}
N 2110 -870 2110 -850 { lab=#net4}
N 2140 -850 2150 -850 { lab=#net4}
N 2150 -890 2150 -850 { lab=#net4}
N 2070 -850 2080 -850 { lab=#net4}
N 2070 -890 2070 -850 { lab=#net4}
N 3260 -890 3260 -830 {lab=#net4}
N 3300 -800 3340 -800 {lab=cas}
N 3340 -800 3340 -740 {lab=cas}
N 3260 -770 3260 -740 {lab=#net12}
N 3240 -800 3260 -800 {lab=#net4}
N 3240 -890 3240 -800 {lab=#net4}
N 3240 -890 3260 -890 {lab=#net4}
N 3260 -740 3260 -730 { lab=#net12}
N 3240 -800 3240 -700 { lab=#net4}
N 3240 -700 3260 -700 { lab=#net4}
N 3340 -740 3340 -700 { lab=cas}
N 3300 -700 3340 -700 { lab=cas}
N 3340 -700 3340 -640 { lab=cas}
N 3260 -640 3340 -640 { lab=cas}
N 3260 -620 3260 -90 { lab=cas}
N 3260 -670 3260 -620 { lab=cas}
N 2110 -530 2110 -400 { lab=ctat}
N 2110 -790 2110 -590 { lab=ctat}
N 2110 -590 2110 -530 { lab=ctat}
C {bandgap_opamp/bandgap_opamp.sym} 760 -250 0 1 {name=x1}
C {lab_wire.sym} 1330 -790 0 0 {name=l1 sig_type=std_logic lab=ptat}
C {lab_wire.sym} 1570 -790 0 0 {name=l2 sig_type=std_logic lab=ptat}
C {lab_wire.sym} 2040 -790 0 1 {name=l3 sig_type=std_logic lab=ctat}
C {lab_wire.sym} 1330 -710 0 0 {name=l4 sig_type=std_logic lab=cas}
C {lab_wire.sym} 1570 -710 0 0 {name=l5 sig_type=std_logic lab=cas}
C {lab_wire.sym} 2040 -710 0 1 {name=l6 sig_type=std_logic lab=cas}
C {lab_wire.sym} 2670 -710 0 0 {name=l7 sig_type=std_logic lab=cas}
C {lab_wire.sym} 2880 -710 0 0 {name=l8 sig_type=std_logic lab=cas}
C {lab_wire.sym} 2670 -790 0 0 {name=l9 sig_type=std_logic lab=ptat}
C {lab_wire.sym} 2880 -790 0 0 {name=l10 sig_type=std_logic lab=ctat}
C {sky130_fd_pr/nfet_01v8_lvt.sym} 2990 -60 0 1 {name=M3
L=8
W=7
ad="[expr @W *0.29]" pd="[expr 2*(@W + 0.29)]"
as="[expr @W *0.29]" ps="[expr 2*(@W + 0.29)]"
nrd="[expr 0.29/@W ]" nrs="[expr 0.29/@W ]"
sa=0 sb=0 sd=0
nf=1 mult=2
model=nfet_01v8_lvt
spiceprefix=X
}
C {sky130_fd_pr/nfet_01v8_lvt.sym} 3240 -60 0 0 {name=M1
L=8
W=7
ad="[expr @W *0.29]" pd="[expr 2*(@W + 0.29)]"
as="[expr @W *0.29]" ps="[expr 2*(@W + 0.29)]"
nrd="[expr 0.29/@W ]" nrs="[expr 0.29/@W ]"
sa=0 sb=0 sd=0
nf=1 mult=2
model=nfet_01v8_lvt
spiceprefix=X
}
C {spice_probe.sym} 1420 -270 0 0 {name=p6 analysis=tran voltage=0.7342}
C {spice_probe.sym} 1660 -230 0 0 {name=p7 analysis=tran voltage=0.7341}
C {spice_probe.sym} 1950 -210 0 0 {name=p8 analysis=tran voltage=0.7338}
C {spice_probe.sym} 2040 -710 0 0 {name=p12 analysis=tran voltage=0.4132}
C {ammeter.sym} 790 -340 0 0 {name=v2 current=7.5997e-06}
C {bandgap_cascurr_cell/bandgap_cascurr_cell.sym} 1420 -750 0 0 {name=x5 m=8}
C {bandgap_cascurr_cell/bandgap_cascurr_cell.sym} 1660 -750 0 0 {name=x6 m=8}
C {bandgap_cascurr_cell/bandgap_cascurr_cell.sym} 1950 -750 0 1 {name=x7 m=8}
C {bandgap_cascurr_cell/bandgap_cascurr_cell.sym} 2760 -750 0 0 {name=x10 m=2}
C {bandgap_cascurr_cell/bandgap_cascurr_cell.sym} 2970 -750 0 0 {name=x11 m=2}
C {sky130_fd_pr/pnp_05v5.sym} 1400 -60 0 0 {name=Q1
m=8
model=pnp_05v5_W3p40L3p40
spiceprefix=X
}
C {sky130_fd_pr/pnp_05v5.sym} 1680 -60 0 1 {name=Q2
m=1
model=pnp_05v5_W3p40L3p40
spiceprefix=X
}
C {ammeter.sym} 1420 -380 0 0 {name=v3 current=7.9249e-06}
C {ammeter.sym} 1660 -380 0 0 {name=v5 current=7.9249e-06}
C {ammeter.sym} 1950 -380 0 0 {name=v6 current=2.3435e-05}
C {capa.sym} 900 -330 0 0 {name=C1
m=1
value=1m
footprint=1206
device="ceramic capacitor"}
C {spice_probe.sym} 790 -550 0 1 {name=p11 analysis=tran voltage=0.8189}
C {spice_probe.sym} 2110 -400 0 0 {name=p9 analysis=tran voltage=0.884}
C {bandgap_bmr/bandgap_bmr.sym} 520 -680 0 0 {name=x8}
C {sky130_fd_pr/pfet_01v8_lvt.sym} 810 -710 0 1 {name=Mcurr
L=8
W=5
ad="'W * 0.29'" pd="'2 * (W + 0.29)'"
as="'W * 0.29'" ps="'2 * (W + 0.29)'"
nrd="'0.29 / W'" nrs="'0.29 / W'"
sa=0 sb=0 sd=0
nf=1 mult=1
model=pfet_01v8_lvt
spiceprefix=X
}
C {lab_wire.sym} 610 -680 0 1 {name=l12 sig_type=std_logic lab=bmr_biasv}
C {lab_wire.sym} 830 -710 0 1 {name=l13 sig_type=std_logic lab=bmr_biasv}
C {sky130_fd_pr/pfet_01v8_lvt.sym} 2440 -490 0 0 {name=Mcurr1
L=8
W=5
ad="'W * 0.29'" pd="'2 * (W + 0.29)'"
as="'W * 0.29'" ps="'2 * (W + 0.29)'"
nrd="'0.29 / W'" nrs="'0.29 / W'"
sa=0 sb=0 sd=0
nf=1 mult=1
model=pfet_01v8_lvt
spiceprefix=X
}
C {lab_wire.sym} 2420 -490 0 0 {name=l14 sig_type=std_logic lab=bmr_biasv}
C {vsource.sym} 320 -400 0 0 {name=Vdd value=\{vdd\}}
C {gnd.sym} 320 0 0 0 {name=l15 lab=GND}
C {code.sym} 3170 -1120 0 0 {name=simulation only_toplevel=false value="
.temp 27

.lib "sky130_fd_pr/models/sky130.lib.spice" sf
.include sky130_fd_pr/models/sky130_fd_pr__model__pnp.model.spice

.param vdd=1.8


.save all

*.op
.ac dec 10 1 1G

.control
   run
   setplot ac1
   set units=degrees
   gnuplot bandgap_core_stability2 db(ac) ph(ac)
.endc
"}
C {res_ac.sym} 2080 -210 1 0 {name=R3
value=1u
device=resistor
m=1
ac=1G}
C {res_ac.sym} 2150 -110 2 0 {name=R4
value=1G
device=resistor
m=1
ac=1u}
C {vsource.sym} 2150 -50 0 0 {name=Vin value="dc=0 ac=1"}
C {lab_wire.sym} 1990 -210 0 1 {name=l16 sig_type=std_logic lab=ac}
C {bandgap_opamp/bandgap_opamp.sym} 2490 -190 0 0 {name=x2}
C {sky130_fd_pr/pfet_01v8_lvt.sym} 2110 -830 3 0 {name=Mcurr2
L=8
W=7
ad="'W * 0.29'" pd="'2 * (W + 0.29)'"
as="'W * 0.29'" ps="'2 * (W + 0.29)'"
nrd="'0.29 / W'" nrs="'0.29 / W'"
sa=0 sb=0 sd=0
nf=1 mult=128
model=pfet_01v8_lvt
spiceprefix=X
}
C {lab_wire.sym} 3340 -800 0 0 {name=l17 sig_type=std_logic lab=cas}
C {sky130_fd_pr/pfet_01v8_lvt.sym} 3280 -800 0 1 {name=M2
L=8
W=5
ad="'W * 0.29'" pd="'2 * (W + 0.29)'"
as="'W * 0.29'" ps="'2 * (W + 0.29)'"
nrd="'0.29 / W'" nrs="'0.29 / W'"
sa=0 sb=0 sd=0
nf=1 mult=2
model=pfet_01v8_lvt
spiceprefix=X
}
C {sky130_fd_pr/pfet_01v8_lvt.sym} 3280 -700 0 1 {name=Mcpdiff1
L=0.5
W=5
ad="'W * 0.29'" pd="'2 * (W + 0.29)'"
as="'W * 0.29'" ps="'2 * (W + 0.29)'"
nrd="'0.29 / W'" nrs="'0.29 / W'"
sa=0 sb=0 sd=0
nf=1 mult=4
model=pfet_01v8_lvt
spiceprefix=X
}
C {res.sym} 1420 -170 0 0 {name=R2
value=6.624k
footprint=1206
device=resistor
m=1}
C {res.sym} 1950 -60 0 0 {name=R5
value=51.16k
footprint=1206
device=resistor
m=1}
